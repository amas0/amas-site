---
path: "/posts/dice-roll-expectations"
date: "2021/02/39"
title: "Expectations and variances of dice rolls"
summary: "\"What do I expect?\" is a natural question to ask when rolling a
dice. Here we dive into expectations and variances of dice rolls and discuss
what they help us understand and where they lead us astray."
---

import { Link } from "gatsby";
import Layout from "../../components/Layout";
import SEO from "../../components/SEO";
import VegaWrapper from "../../components/Vega";
import two_dice_vega from "../probabilities_dice_rolls/two_dice_vega.json";

Often when rolling a dice, we know what we _want_ -- a high roll to defeat
the monster or the right number to win a wager -- unfortunately for us,
desire has little impact on the outcome of the roll. In these situations,
it's useful to know what to expect and how variable the outcome will be
around that expectation.

In this post, we define expectation and variance mathematically, compute 
them for dice rolls, and explore some key properties that help us 
understand the potential outcomes.

## Some definitions

By their names, we develop a decent intuition of what expectation and 
variance are trying to tell us. **Expectation (or expected value) gives us a
single value that summarizes the _average_ outcome**, often representing some
measure of the center of a probability distribution. **Variance quantifies how
variable the outcomes are _about the average_.** A low variance implies that
most of the outcomes are clustered near the expected value whereas a high 
variance implies the outcomes spread out far from the expected value.

Mathematically, we represent the expectation of a discrete random variable
$X$ as $E(X)$ and variance as $\mathrm{Var}(X)$. They can be defined as
follows:

$$
E(X) = \sum_{k=1}^n k P(X=k) \qquad \mathrm{Var}(X) = E(X^2) - E(X)^2
$$

Expectation is a weighted sum of outcomes by their probability and variance 
is itself defined in terms of expectations. As we primarily care dice rolls
here, the sum only goes over the $n$ finite outcomes representing the $n$ 
faces of the dice (it can be defined more generally as summing over infinite
outcomes for other probability distributions).

One important thing to note about variance is that it depends on the squared
expectation _and_ the expectation of $X^2$. While we could calculate the
probability distribution of $X^2$ and use our above expression for
expectation, it is much easier to keep the following result in mind (named
the [law of the unconscious
statistician](https://en.wikipedia.org/wiki/Law_of_the_unconscious_statistician)):

$$
E(g(X)) = \sum_{k=1}^n g(k) P(X=k)
$$

Which tells us that the expectation of a function, $g(X)$, can be computed 
using the original probability distribution and applying the function, $g$,
to the value of the outcomes in the sum.

## Applying these to dice rolls

All we need to calculate these for simple dice rolls is the probability mass 
function, which we explored in our <Link to="/posts/dice-roll-probability">post on the dice roll distribution</Link>:

$$
X \sim \textrm{Dice}(n) \qquad P(X=x) =
\begin{cases}
	\frac{1}{n} & x\in\{1,\cdots,n\} \\
	0 & \mathrm{otherwise}
\end{cases}
$$

The direct calculation is straightforward from here:

$$
\begin{aligned}
E(X) &= \sum_{k=1}^n \frac{k}{n} \\
&= \frac{1}{n} \sum_{k=1}^n k \\
&= \frac{n(n+1)}{2n}
\end{aligned}
$$

Yielding the simplified expression for the expectation:

$$
\boxed{
E(X) = \frac{n+1}{2}
}
$$

So the expected value of a dice roll is half of the number of faces
plus $1/2$. Let's take a look at the variance -- we first calculate
$E(X^2)$:

$$
\begin{aligned}
E(X^2) &= \frac{1}{n} \sum_{k=1}^n k^2 \\
&= \frac{1}{n}\left(\frac{n(n+1)(2n+1)}{6}\right)\\
&= \frac{(n+1)(2n+1)}{6}
\end{aligned}
$$

Substituting this result and the square of our expectation into our
definition for variance we get:

$$
\mathrm{Var}(X) = \frac{(n+1)(2n+1)}{6} - \left(\frac{n+1}{2}\right)^2
$$

Simplifying this expression yields:

$$
\boxed{
	\mathrm{Var}(X) = \frac{n^2 - 1}{12}
}
$$

## What does this tell us about dice rolls?

This is the part where I tell you that **expectations and variances are 
mostly useless summaries of _single_ dice rolls**. The fact that every 
face is equiprobable in a single roll is all the information you need 
to understand the general behavior of dice.

On the other hand, **expectations and variances are extremely useful 
when dealing with rolling _multiple_ dice**. As we showed at the end of 
our <Link to="/posts/dice-roll-probability">post on dice roll probabilities</Link>,
when you look at the sum of dice rolls, the distribution starts to concentrate
towards the center of the distribution -- in fact in concentrates exactly
around the expectation of the sum. We see this for two d6s here:

<VegaWrapper spec={two_dice_vega} />

As we add more and more dice, the distributions concentrates more about the 
expected value as it [approaches a normal
distribution](https://en.wikipedia.org/wiki/Central_limit_theorem). 

Since our multiple dice rolls are independent of each other, calculating 
the expectation and variance is fairly straightforward, as the following are
true:

$$
E\left(\sum_{i=1}^m X_i\right) = \sum_{i=1}^m E(X_i)
$$

$$
\mathrm{Var}\left(\sum_{i=1}^m X_i\right) = \sum_{i=1}^m \mathrm{Var}(X_i)
$$

The expectation and variance of a sum of $m$ dice is the sum of their 
respective expectations and variances. This gives us easy expressions
if we just plug in what we derived above for the sum of $m$ identical 
$n$-sided dice:

$$
E\left(\sum_{i=1}^m X_i\right) = \frac{m(n+1)}{2}
$$

$$
\mathrm{Var}\left(\sum_{i=1}^m X_i\right) = \frac{m(n+1)(2n+1)}{6}
$$

A quick check on this for $m=2$ and $n=6$ gives and expected value of
$7$, which matches up exactly with where we see the peak in the above 
graph.