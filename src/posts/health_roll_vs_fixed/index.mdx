---
path: "/posts/health-roll-vs-fixed"
date: "2021/03/02"
title: "How bad is rolling for health in DnD 5e?"
summary: "DnD 5e provides two mechanics for gaining health when leveling up: 
roll for it or take a fixed value. The fixed value is better on average, but
by how much?"
---

import { Link } from "gatsby";
import Layout from "../../components/Layout";
import SEO from "../../components/SEO";
import VegaWrapper from "../../components/Vega";

import probability_fixed_better_vega from "./probability_fixed_better_vega.json";
import interval_fixed_vs_rolling_vega from "./interval_fixed_vs_rolling_vega.json";

Core character progression in Dungeons and Dragons revolves around
leveling up, in which your adventurer becomes hardier and more powerful.
As part of this, characters gain a higher hit point maximum each level.
The rules provide two alternates ways of determining how much of an 
increase you get, as we see here from PHB page 15:

> Each time you gain a level, you gain 1 additional Hit Die. Roll 
> that Hit Die, add your Constitution modifier to the roll, and add 
> the total to your hit point maximum. Alternatively, you can use the 
> fixed value shown in your class entry, which is the average result
> of the die roll (rounded up).

An interesting bit here is that the alternate rule uses a _rounded 
up_ average of the dice roll. This means that on average, **the fixed value will
be better than rolling.** In this post, we'll take a look at the detailed 
differences in using these two different rules.

## Defining the strategies

We can represent these strategies as random variables. As for notation, 
we will use $X_{\mathrm{roll}}^k$ and $X_{\mathrm{fixed}}^k$, to represent 
the amount of health gained after leveling up $k$ times for the rolling and
fixed value rules, respectively. The fixed value is so simple since it's
deterministic, we write:

$$
X_{\mathrm{fixed}}^k = k\left(\frac{d+2}{2} + C_{mod}\right)
$$

Where $d$ is the value of your class's hit dice and $C_{mod}$ is your
constitution modifier. As an example, suppose you are playing a Bard
with a +1 Constitution modifier, then $X_{\mathrm{fixed}}^k = 6k$ -- 
each level you gain 6 health (until your constitution modifier changes).

The rolling strategy is a bit more complex. If we let $Y_d^k$ represent 
the sum of $k$ $d$-sided dice rolls, we can rewrite it as:

$$
X_{\mathrm{roll}}^k = k C_{mod} + Y_d^k 
$$

We are primarily interested in the _difference_ between these two 
strategies, $\Delta X^k = X_\mathrm{fixed}^k - X_\mathrm{roll}^k$, 
which represents how much better the fixed strategy is compared 
to rolling. We can rewrite it using the definitions above:

$$
\Delta X^k = k \frac{d+2}{2} - Y_d^k
$$

Rather unsurprisingly, our dependence on the constitution modifier 
drops completely and we have a random variable defined in terms 
of the sum of dice rolls, which is another random variable.

## Expectation

A simple step from here is to take a look at the expectation of this random
variable. Applying the tools that we looked at in a
post on <Link to="/posts/dice-roll-expectations">expectations of dice rolls</Link> we can tackle this:

$$
\begin{aligned}
E\left(\Delta X^k\right) &= k \frac{d + 2}{2} - E Y_d^k \\
&= k\frac{d+2}{2} - k \frac{d+1}{2} \\
E\left(\Delta X^k\right) &= \frac{k}{2}
\end{aligned}
$$

It makes sense in retrospect, but the fact that the expected difference 
between the two strategies doesn't depend on your hit dice, but only 
the number of levels gained surprised me. A simple way to say this is 
**for every two levels gained, taking the fixed health increase will 
give you 1 more hit point, on average**.

## The probability distribution of how much better fixed health is

The expectation is not the whole picture, of course. The whole point 
of rolling is that there is randomness in the process. We can do a 
bit of algebra to write out the probability distribution of $\Delta X^k$ 
in terms of the sum of dice roll as below:

$$
P(\Delta X^k = x) = P\left(Y_d^k = k\frac{d+2}{2} - x\right)
$$

Using the results from our <Link to="/posts/sums-dice-rolls">recent post</Link>
on the sums of dice rolls, we can write out the exact form of this:

$$
P(\Delta X^k = x) = \frac{1}{d^k}\sum_{l=0}^{\left\lfloor\frac{k}{2} - \frac{x}{d}\right\rfloor} (-1)^l {k \choose l} {k\frac{d+2}{2} - x - dl - 1 \choose k - 1}
$$

It's a bit messy, but we can calculate some interesting quantities,
such as the probability that taking the fixed health on level-up is better
than rolling -- $P(\Delta X^k > 0)$ -- by adding up terms when $x > 0$
from above. The below figure shows how this quantity changes as you level 
up more.

<VegaWrapper spec={probability_fixed_better_vega} />

There are a few interesting features immediately noticeable here. The 
first is how **the benefits of taking the fixed health increase are greater
with a low hit dice** -- by 5th level a Wizard or Sorcerer has a 2-in-3 
chance of having more health by taking fixed every level. On the other hand, 
a class with a d10 hit dice doesn't reach that same likelihood 
until around 10th or 11th level. 

Conceptually, this arises because the $\frac{1}{2}$ average benefit is a pretty 
big chunk of the range of possible outcomes on a d6, but on a d12? Not so much.

The second interesting point on this graph (to me) is that **there is 
no difference between fixed health and rolling if you only do it once!** So 
if you're one of those people who wants to mathematically min-max your 
character to the greatest degree possible, you can still have a little fun 
by rolling for health _just one time_. 

## Just how big is the difference?

While the above is more focused on whether there is any difference at all,
probably what would be more interesting is looking at the range of possible
outcomes and seeing how the *actual number of hit points gained varies among
these strategies*. 

In the below figure, we compare the fixed health strategy (horizontal line)
with the 50% central interval of outcomes from the rolling strategy, you 
can think of the interval as the range of outcomes that are pretty close to
average. 

<VegaWrapper spec={interval_fixed_vs_rolling_vega} />

We are only showing the results for d6 and d12 hit dice up to 10 level ups to
avoid cluttering the graph -- the behavior we see is consistent for the 
other hit dice as well. The key thing is that the fixed health amount slowly 
moves to the upper end of the central interval. By the 10th level up, fixed 
health increases are either just outside the 50% interval as is the case for 
d6 hit dice, or at the upper end of the range as we see for d12.

In all cases, the fixed health outcome is at least close to the central
intervals, which means that the differences between the two strategies isn't
that big. If I had to sum it up, I'd say that **although the odds favor the
fixed health strategy, I wouldn't be surprised at all if someone happened
to roll better health in the long term.**

## Which strategy to pick?

The way you choose to advance your character's health is one of the more
minor decisions you have to make in DnD. But hey. That doesn't stop us from 
talking about the pros and cons of the different strategies:

#### Why choose fixed health increases?

* Mathematically, it wins on average
* Especially when playing a low hit dice class like Wizard, hit points come 
at a premium and taking the fixed value is a prudent choice
* At low levels, the prospect of rolling a 1 or 2 for health can have dangerous
consequences -- avoiding that can be the difference between life and death for your character

#### Why choose rolling for health?

* Rolling is fun!
* The benefits of fixed health for high hit dice classes are diminished, 
so you risk less by choosing to roll 
* Fixed health prevents you from getting low values, but it also prevents 
you from getting high values as well -- if you want to press your luck, there's 
no better way to get a big health pool than some lucky rolls

Outside of any number-based arguments, it goes without saying (I'll say it 
anyways) that it's best to **pick the strategy that is most likely
to give you a character/style of play that you have the most fun with. It is 
a game, after all.** 
